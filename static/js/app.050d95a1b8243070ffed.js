webpackJsonp([1],{"/Ai2":function(e,t){},"1nDT":function(e,t){},"5tNh":function(e,t,r){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("角色")])])}]};t.a=n},"7GSL":function(e,t,r){"use strict";var n=r("rcbH"),a=r.n(n),s=r("5tNh");var o=function(e){r("P5+O")},i=r("VU/8")(a.a,s.a,!1,o,"data-v-0796604c",null);t.default=i.exports},CLk2:function(e,t){},"Cm+n":function(e,t){},DaeS:function(e,t){},EPR5:function(e,t){},"F+Ga":function(e,t,r){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("角色")])])}]};t.a=n},GlBT:function(e,t,r){"use strict";var n=r("wJg8"),a=r.n(n),s=r("OVeQ");var o=function(e){r("EPR5")},i=r("VU/8")(a.a,s.a,!1,o,"data-v-c2dce65e",null);t.default=i.exports},J373:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=r("VU/8")({name:"app"},a,!1,function(e){r("tBG6")},null,null).exports,o=r("zL8q"),i=r.n(o),l=(r("tvR6"),r("/ocq")),u=r("Xxa5"),c=r.n(u),d=r("exGp"),m=r.n(d),f={data:function(){return{loginForm:{username:"",password:""},loginFormRules:{username:[{required:!0,message:"请输入登录名称",trigger:"blur"},{min:3,max:10,message:"长度在3到10个字符区间",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符区间",trigger:"blur"}]}}},methods:{resetLoginFrom:function(){this.$refs.loginFormRef.resetFields()},verifyLoginInfo:function(){var e,t=this;this.$refs.loginFormRef.validate((e=m()(c.a.mark(function e(r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("login",t.loginForm);case 4:if(n=e.sent,console.log(n),200===n.data.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("登陆失败"));case 8:window.sessionStorage.setItem("token",n.data.data.token),t.$router.push("/home"),t.$message.success("登录成功");case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[r("el-form",{ref:"loginFormRef",staticClass:"login_from",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0px"}},[r("h1",{staticClass:"login_title"},[e._v("公路港后台管理系统")]),e._v(" "),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifyLoginInfo()}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifyLoginInfo()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"buttons"},[r("el-button",{attrs:{type:"primary"},on:{click:e.verifyLoginInfo}},[e._v("Login")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.resetLoginFrom}},[e._v("Reset")])],1)],1)],1)])},staticRenderFns:[]};var g=r("VU/8")(f,p,!1,function(e){r("qkMw")},"data-v-4d9e8ba0",null).exports,v={data:function(){return{menuList:[],iconList:["el-icon-user","el-icon-set-up","el-icon-goods","el-icon-s-order","el-icon-s-data"],isCollapse:!1}},created:function(){this.getMenuList()},methods:{userLogout:function(){window.sessionStorage.clear(),this.$router.push("/login")},getMenuList:function(){var e=this;return m()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("menus");case 2:if(r=t.sent,console.log(r),200===r.data.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.meta.meg));case 6:e.menuList=r.data.data,console.log(e.menuList);case 8:case"end":return t.stop()}},t,e)}))()},toggleCollapse:function(){this.isCollapse=!this.isCollapse}}},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("span",[e._v("公路港后台管理系统")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.userLogout}},[e._v("退出")])],1),e._v(" "),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),e._v(" "),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#ffffff","default-active":e.$route.path,"unique-opened":"",router:"",collapse:e.isCollapse,"collapse-transition":!1}},e._l(e.menuList,function(t,n){return r("el-submenu",{key:t.id,attrs:{index:t.id+""}},[r("template",{slot:"title"},[r("i",{class:e.iconList[n]}),e._v(" "),r("span",[e._v(e._s(t.authName))])]),e._v(" "),e._l(t.children,function(t){return r("el-menu-item",{key:t.id,attrs:{index:"/"+t.path}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),e._v(" "),r("span",[e._v(e._s(t.authName))])])],2)})],2)}),1)],1),e._v(" "),r("el-main",[r("router-view")],1)],1)],1)},staticRenderFns:[]};var h=r("VU/8")(v,b,!1,function(e){r("Ykfr")},"data-v-4be00c51",null).exports,_={render:function(){var e=this.$createElement;return(this._self._c||e)("h3",[this._v("Welcome")])},staticRenderFns:[]},k=r("VU/8")(null,_,!1,null,null,null).exports,y={data:function(){var e=function(e,t,r){if(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){if(/^(0|86|17951)?(13[0-9]|14[57]|15[012356789]|17[678]|18[0-9])[0-9]{8}$/.test(t))return r();r(new Error("请输入合法的号码"))};return{queryInfo:{params:"",pagenum:1,pagesize:10},addUserForm:{username:"",password:"",email:"",mobile:""},editUserForm:{username:"",email:"",mobile:""},addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3到10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度在6到16个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}]},editUserRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}]},userList:[],userInfo:{},roleList:[],userListSize:0,addDialogVisible:!1,editDialogVisible:!1,setRoleDgialogVisible:!1,selectedRoleId:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return m()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r.data),200===r.data.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取数据失败"));case 6:e.userList=r.data.data.users,e.userListSize=r.data.data.total;case 8:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},changeUserStatus:function(e){var t=this;return m()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("users/"+e.id+"/state/"+e.mg_state);case 2:if(n=r.sent,console.log(n),200===n.data.meta.status){r.next=7;break}return e.mg_state=!e.mg_state,r.abrupt("return",t.$message.error("用户状态更新失败"));case 7:t.$message.success("用户状态更新成功");case 8:case"end":return r.stop()}},r,t)}))()},addUserCloseDialog:function(){this.$refs.addUserFormRef.resetFields()},editUserCloseDialog:function(){this.$refs.editUserFormRef.resetFields()},setRoleCloseDialog:function(){this.selectedRoleId="",this.userInfo={}},addUser:function(){var e,t=this;this.$refs.addUserFormRef.validate((e=m()(c.a.mark(function e(r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("users",t.addUserForm);case 4:if(n=e.sent,console.log(n),201===n.data.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("新增用户失败"));case 8:t.$message.success("新增用户成功"),t.addDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},showEditDialog:function(e){var t=this;return m()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("users/"+e);case 3:if(n=r.sent,console.log(n),200===n.data.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("获取失败"));case 7:t.$message.success("获取成功"),t.editUserForm=n.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editUser:function(){var e,t=this;this.$refs.editUserFormRef.validate((e=m()(c.a.mark(function e(r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("users/"+t.editUserForm.id,{email:t.editUserForm.email,mobile:t.editUserForm.mobile});case 4:if(n=e.sent,console.log(n),200===n.data.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("修改用户失败"));case 8:t.$message.success("修改用户成功"),t.editDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteUser:function(e){var t=this;return m()(c.a.mark(function r(){return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除用户"));case 5:return r.next=7,t.$http.delete("users/"+e);case 7:if(200===r.sent.data.meta.status){r.next=10;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 10:t.$message.success("删除用户完毕"),t.getUserList();case 12:case"end":return r.stop()}},r,t)}))()},showSetRoleDialog:function(e){var t=this;return m()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.userInfo=e,t.setRoleDgialogVisible=!0,r.next=4,t.$http.get("roles");case 4:if(n=r.sent,console.log(n),200===n.data.meta.status){r.next=8;break}return r.abrupt("return",t.$message.error("获取角色失败"));case 8:t.$message.success("获取角色成功"),t.roleList=n.data.data;case 10:case"end":return r.stop()}},r,t)}))()},setRole:function(){var e=this;return m()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedRoleId){t.next=2;break}return t.abrupt("return",e.$message.error("未选择角色"));case 2:return t.next=4,e.$http.put("users/"+e.userInfo.id+"/role",{rid:e.selectedRoleId});case 4:if(r=t.sent,console.log(r),200===r.data.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("更改角色失败"));case 8:e.$message.success("更改角色成功"),e.setRoleDgialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}},t,e)}))()}}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList(t)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeUserStatus(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row.id)}}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRoleDialog(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.userListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addUserCloseDialog}},[r("el-form",{ref:"addUserFormRef",attrs:{model:e.addUserForm,rules:e.addUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)}},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)}},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)}},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)}},model:{value:e.addUserForm.mobile,callback:function(t){e.$set(e.addUserForm,"mobile",t)},expression:"addUserForm.mobile"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editUserCloseDialog}},[r("el-form",{ref:"editUserFormRef",attrs:{model:e.editUserForm,rules:e.editUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser(t)}},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser(t)}},model:{value:e.editUserForm.mobile,callback:function(t){e.$set(e.editUserForm,"mobile",t)},expression:"editUserForm.mobile"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDgialogVisible,width:"40%"},on:{"update:visible":function(t){e.setRoleDgialogVisible=t},close:e.setRoleCloseDialog}},[r("el-form",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),e._v(" "),r("p",[e._v("当前的角色："+e._s(e.userInfo.role_name))]),e._v(" "),r("p",[e._v("请选择新角色：\n                "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.roleList,function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDgialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var R=r("VU/8")(y,x,!1,function(e){r("bvmr")},"data-v-133b02dc",null).exports,w={data:function(){return{rightsList:[]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var e=this;return m()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rights/list");case 2:if(200===(r=t.sent).data.meta.status){t.next=5;break}return t.abrupt("return",e.$message.error("获取权限列表失败"));case 5:console.log(r),e.rightsList=r.data.data;case 7:case"end":return t.stop()}},t,e)}))()}}},$={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("权限列表")])],1),e._v(" "),r("el-card",[r("el-table",{attrs:{data:e.rightsList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"名称",prop:"authName"}}),e._v(" "),r("el-table-column",{attrs:{label:"路径",prop:"path"}}),e._v(" "),r("el-table-column",{attrs:{label:"权限等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?r("el-tag",[e._v("一级")]):e._e(),e._v(" "),1==t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):e._e(),e._v(" "),2==t.row.level?r("el-tag",{attrs:{type:"warning"}},[e._v("三级")]):e._e()]}}])})],1)],1)],1)},staticRenderFns:[]};var F=r("VU/8")(w,$,!1,function(e){r("/Ai2")},"data-v-1fa2083c",null).exports,U={data:function(){return{roleList:[],rightList:[],checkedKeys:[],addRoleForm:{roleName:"",roleDesc:""},addRoleFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},editRoleForm:{},editRoleFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},treeProps:{children:"children",label:"authName"},addDialogVisible:!1,editDialogVisible:!1,setDialogVisible:!1,currentRoleId:0}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return m()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(r=t.sent,console.log(r),200===r.data.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取角色失败"));case 6:e.$message.success("获取角色成功"),e.roleList=r.data.data;case 8:case"end":return t.stop()}},t,e)}))()},showAddRoleDialog:function(){this.addDialogVisible=!0},addRoleCloseDialog:function(){this.$refs.addRoleFormRef.resetFields()},setRightCloseDialog:function(){this.checkedKeys.splice(0,this.checkedKeys.length)},addRole:function(){var e,t=this;this.$refs.addRoleFormRef.validate((e=m()(c.a.mark(function e(r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("roles",t.addRoleForm);case 4:if(n=e.sent,console.log(n),201===n.data.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("创建角色失败"));case 8:t.$message.success("创建角色成功"),t.addDialogVisible=!1,t.getRoleList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},showEditRoleDialog:function(e){var t=this;return m()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("roles/"+e);case 3:if(n=r.sent,console.log(n),200===n.data.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error("获取角色失败"));case 7:t.$message.success("获取角色成功"),t.editRoleForm=n.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editRoleCloseDialog:function(){this.$refs.editRoleFormRef.resetFields()},editRole:function(){var e,t=this;this.$refs.editRoleFormRef.validate((e=m()(c.a.mark(function e(r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("roles/"+t.editRoleForm.roleId,{roleName:t.editRoleForm.roleName,roleDesc:t.editRoleForm.roleDesc});case 4:if(n=e.sent,console.log(n),200===n.data.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("修改角色失败"));case 8:t.$message.success("修改角色成功"),t.editDialogVisible=!1,t.getRoleList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteRole:function(e){var t=this;return m()(c.a.mark(function r(){return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除角色"));case 5:return r.next=7,t.$http.delete("roles/"+e);case 7:if(200===r.sent.data.meta.status){r.next=10;break}return r.abrupt("return",t.$message.error("删除角色失败"));case 10:t.$message.success("删除角色完毕"),t.getRoleList();case 12:case"end":return r.stop()}},r,t)}))()},deleteRight:function(e,t){var r=this;return m()(c.a.mark(function n(){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===n.sent){n.next=5;break}return n.abrupt("return",r.$message.info("取消删除权限"));case 5:return n.next=7,r.$http.delete("roles/"+e.id+"/rights/"+t);case 7:if(a=n.sent,console.log(a),200===a.data.meta.status){n.next=11;break}return n.abrupt("return",r.$message.error("删除权限失败"));case 11:r.$message.success("删除权限成功"),e.children=a.data.data;case 13:case"end":return n.stop()}},n,r)}))()},showSetRightDialog:function(e){var t=this;return m()(c.a.mark(function r(){var n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.currentRoleId=e.id,t.getLeafKeys(e,t.checkedKeys),t.setDialogVisible=!0,r.next=5,t.$http.get("rights/tree");case 5:if(n=r.sent,console.log(n),200===n.data.meta.status){r.next=9;break}return r.abrupt("return",t.$message.error("获取权限失败"));case 9:t.$message.success("获取权限成功"),t.rightList=n.data.data;case 11:case"end":return r.stop()}},r,t)}))()},setRight:function(){var e=this;return m()(c.a.mark(function t(){var r,n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[e.$refs.treeRef.getCheckedKeys(),e.$refs.treeRef.getHalfCheckedKeys()],n=r.join(","),t.next=4,e.$http.post("roles/"+e.currentRoleId+"/rights",{rids:n});case 4:if(a=t.sent,console.log(a),200===a.data.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改权限失败"));case 8:e.$message.success("修改权限成功"),e.setDialogVisible=!1,e.getRoleList();case 11:case"end":return t.stop()}},t,e)}))()},getLeafKeys:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach(function(e){return r.getLeafKeys(e,t)})}}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("角色列表")])],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.showAddRoleDialog}},[e._v("添加角色")]),e._v(" "),r("el-table",{attrs:{data:e.roleList,stripe:""}},[r("el-table-column",{attrs:{label:" ",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,function(n,a){return r("el-row",{key:n.id,class:["borderBottom",0===a?"borderTop":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.deleteRight(t.row,n.id)}}},[e._v(e._s(n.authName))]),e._v(" "),r("i",{staticClass:"el-icon-caret-right"})],1),e._v(" "),r("el-col",{attrs:{span:19}},e._l(n.children,function(n,a){return r("el-row",{key:n.id,class:[0===a?"":"borderTop","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.deleteRight(t.row,n.id)}}},[e._v(e._s(n.authName))]),e._v(" "),r("i",{staticClass:"el-icon-caret-right"})],1),e._v(" "),r("el-col",{attrs:{span:18}},e._l(n.children,function(n,a){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.deleteRight(t.row,n.id)}}},[e._v("\n                                    "+e._s(n.authName)+"\n                                ")])}),1)],1)}),1)],1)})}}])}),e._v(" "),r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditRoleDialog(t.row.id)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteRole(t.row.id)}}},[e._v("删除")]),e._v(" "),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRightDialog(t.row)}}},[e._v("分配权限")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加角色",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addRoleCloseDialog}},[r("el-form",{ref:"addRoleFormRef",attrs:{model:e.addRoleForm,rules:e.addRoleFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRole(t)}},model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRole(t)}},model:{value:e.addRoleForm.roleDesc,callback:function(t){e.$set(e.addRoleForm,"roleDesc",t)},expression:"addRoleForm.roleDesc"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改角色",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editRoleCloseDialog}},[r("el-form",{ref:"editRoleFormRef",attrs:{model:e.editRoleForm,rules:e.editRoleFormRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editRole(t)}},model:{value:e.editRoleForm.roleName,callback:function(t){e.$set(e.editRoleForm,"roleName",t)},expression:"editRoleForm.roleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editRole(t)}},model:{value:e.editRoleForm.roleDesc,callback:function(t){e.$set(e.editRoleForm,"roleDesc",t)},expression:"editRoleForm.roleDesc"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配权限",visible:e.setDialogVisible,width:"40%"},on:{"update:visible":function(t){e.setDialogVisible=t},close:e.setRightCloseDialog}},[r("el-tree",{ref:"treeRef",attrs:{data:e.rightList,props:e.treeProps,"node-key":"id","default-checked-keys":e.checkedKeys,"show-checkbox":"","default-expand-all":""}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.setRight}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var L=r("VU/8")(U,D,!1,function(e){r("oIjV")},"data-v-46ab059d",null).exports,C=r("ugRU"),V=r("WngN"),E=r("7GSL"),I=r("GlBT"),O=r("zVpJ");n.default.use(l.a);var q=new l.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:g},{path:"/home",component:h,redirect:"/welcome",children:[{path:"/welcome",component:k},{path:"/users",component:R},{path:"/rights",component:F},{path:"/roles",component:L},{path:"/goods",component:C.default},{path:"/params",component:V.default},{path:"/categories",component:E.default},{path:"/orders",component:I.default},{path:"/reports",component:O.default}]}]});q.beforeEach(function(e,t,r){return"/login"===e.path?r():window.sessionStorage.getItem("token")?void r():r("/login")});var N=q,z=(r("J373"),r("mtWM")),S=r.n(z);S.a.defaults.baseURL="https://www.liulongbin.top:8888/api/private/v1/",S.a.interceptors.request.use(function(e){return e.headers.Authorization=window.sessionStorage.getItem("token"),e}),n.default.prototype.$http=S.a,n.default.config.productionTip=!1,n.default.use(i.a),new n.default({el:"#app",router:N,components:{App:s},template:"<App/>"})},OVeQ:function(e,t,r){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("角色")])])}]};t.a=n},Ouqj:function(e,t,r){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("角色")])])}]};t.a=n},"P5+O":function(e,t){},WngN:function(e,t,r){"use strict";var n=r("ocPX"),a=r.n(n),s=r("h8Rr");var o=function(e){r("mODe")},i=r("VU/8")(a.a,s.a,!1,o,"data-v-1a86c7bc",null);t.default=i.exports},Ykfr:function(e,t){},bvmr:function(e,t){},h8Rr:function(e,t,r){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("角色")])])}]};t.a=n},mODe:function(e,t){},oIjV:function(e,t){},ocPX:function(e,t){},qkMw:function(e,t){},rcbH:function(e,t){},tBG6:function(e,t){},tvR6:function(e,t){},ugRU:function(e,t,r){"use strict";var n=r("DaeS"),a=r.n(n),s=r("F+Ga");var o=function(e){r("CLk2")},i=r("VU/8")(a.a,s.a,!1,o,"data-v-1be89b80",null);t.default=i.exports},wJg8:function(e,t){},zVpJ:function(e,t,r){"use strict";var n=r("Cm+n"),a=r.n(n),s=r("Ouqj");var o=function(e){r("1nDT")},i=r("VU/8")(a.a,s.a,!1,o,"data-v-69764433",null);t.default=i.exports}},["NHnr"]);
//# sourceMappingURL=app.050d95a1b8243070ffed.js.map